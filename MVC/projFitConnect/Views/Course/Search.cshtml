@section Styles {
    <style>
        .text-container {
            width: 500px;
            margin: 20px 0;
        }

        .text-folded {
            max-height: 100px;
            overflow: hidden;
            transition: max-height 0.5s ease;
            font-size: 20px;
        }

        .text-expanded {
            max-height: 1000px; /* 可以設置一個足夠大的值來展示全部內容 */
        }

        #toggleButton {
            background-color: transparent;
            border: none;
            color: blue;
            cursor: pointer;
            text-decoration: underline;
            padding: 0;
            font-size: 1em;
            margin-top: 10px;
        }

            #toggleButton:hover {
                text-decoration: none;
            }

        .container {
            display: flex;
            align-items: flex-start;
        }

        .carousel-container {
            flex: 1;
            margin-right: 20px;
        }

        .text-content {
            flex: 2;
        }

        .course-card-container {
            display: flex;
            align-items: flex-start;
            gap: 20px;
        }

        .course-card {
            width: 300px;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 16px;
            text-align: left;
            background-color: #fff;
        }

            .course-card h2 {
                color: #00796B;
                font-size: 18px;
            }

            .course-card .detail {
                display: flex;
                align-items: center;
                margin: 8px 0;
            }

                .course-card .detail img {
                    width: 24px;
                    height: 24px;
                    margin-right: 8px;
                }

            .course-card .price {
                font-size: 24px;
                font-weight: bold;
                color: #388E3C;
                margin-top: 12px;
            }

        .divider {
            border-top: 1px solid #ddd;
            margin: 8px 0;
        }

        .button-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-self: flex-start;
            margin-top: 167px;
        }

        .button {
            display: inline-flex;
            align-items: center;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            color: white;
            font-size: 16px;
            font-weight: bold;
        }

            .button img {
                margin-right: 10px;
            }

        .gym {
            background-color: #EDF7F0;
            color: #2D9C75;
        }

        .buyCourse {
            background-color: #5FB878;
        }

        .coach {
            background-color: #5FB878;
        }

        #returnButton {
            background-color: transparent;
            border: 1px solid transparent; /* 可以加上邊框，使按鈕可見 */
            color: slategray; /* 按鈕文字顏色 */
            cursor: pointer;
            padding: 0;
            font-size: 24px;
            margin-top: 10px;
        }

            #returnButton:hover {
                text-decoration: none;
            }
    </style>
}

<div style="padding-top:120px"></div>
<div class="return-button">
    <button id="returnButton" onclick="goBack()">＜返回</button>
</div>
<div class="container" id="main_div">
    <div class="carousel-container">
        <div id="carouselExampleFade" class="carousel slide carousel-fade" data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="https://img.shoplineapp.com/media/image_clips/663c6333a1cc270011604bc1/original.jpg?1715233587" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                    <img src="https://img.shoplineapp.com/media/image_clips/663c633b4e4ee000171971aa/original.jpg?1715233595" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                    <img src="https://img.shoplineapp.com/media/image_clips/663c8aebb455500019558155/original.jpg?1715243755" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                    <img src="https://img.shoplineapp.com/media/image_clips/663c634aefa4ea00118ae417/original.jpg?1715233609" class="d-block w-100" alt="...">
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>
    <div class="text-content">
        <h1 id="courseTitle" style="width: 500px;">[教練研習]「張力重置技術」｜【整人專家】整合人體訓練的專家</h1>
        <div class="text-container">
            <div class="text-folded" id="textContent">
                <span id="courseDescription">
                    「張力重置技術」(Tension Reset Technique)帶你了解軟組織、弄懂肌肉、筋膜組織緊繃張力背後的原理，以及該如何透過正確的組織排列、動作擺位，去影響肌肉骨骼張力，鬆動每一個節點，並擴及全身，達到整體張力平衡的狀態。
                </span>
            </div>
            <button id="toggleButton">顯示更多</button>
        </div>
        <div class="course-card-container">
            <div class="course-card">
                <h2>關於課程</h2>
                <div class="detail">
                    <img src="https://img.icons8.com/ios-glyphs/30/00796B/clock--v1.png" alt="Time">
                    <div>
                        <div>上課時間</div>
                        <div id="courseDate">2024.1.07 (日)</div>
                        <div id="courseTime">課程時間為 09:30 - 18:00</div>
                    </div>
                </div>
                <div class="divider"></div>
                <div class="detail">
                    <img src="https://img.icons8.com/ios-glyphs/30/00796B/place-marker.png" alt="Location">
                    <div>
                        <div>上課地點</div>
                        <div id="courseLocation">雙北地區近捷運站健身房</div>
                        <div>課程前1周通知 (信件確認)</div>
                    </div>
                </div>
                <div class="divider"></div>
                <div class="detail">
                    <img src="https://img.icons8.com/ios-glyphs/30/00796B/money.png" alt="Price">
                    <div>
                        <div>課程價格</div>
                        <div class="price" id="coursePrice">7,990</div>
                    </div>
                </div>
            </div>
            <div class="button-container">
                <a href="https://localhost:7168/gym/" class="button gym">
                    <img src="https://cdn0.iconfinder.com/data/icons/phosphor-fill-vol-3/256/house-fill-256.png" alt="..." width="20">
                    瞭解場館
                </a>
                <a href="#" class="button buyCourse">
                    <img src="https://cdn0.iconfinder.com/data/icons/phosphor-regular-vol-4/256/shopping-cart-256.png" alt="..." width="20">
                    購買課程
                </a>
                <a href="https://localhost:7168/Trainer/Search" class="button coach">
                    <img src="https://cdn0.iconfinder.com/data/icons/users-android-l-lollipop-icon-pack/24/user-256.png" alt="..." width="20">
                    課程講師
                </a>
            </div>
        </div>
    </div>
</div>







@section Scripts {
    <script>
        console.log(@ViewBag.classScheduleId);
        const classScheduleId = @ViewBag.classScheduleId;


        //文字摺疊
        document.addEventListener('DOMContentLoaded', function () {
            const textContent = document.getElementById('textContent');
            const toggleButton = document.getElementById('toggleButton');

            toggleButton.addEventListener('click', function () {
                if (textContent.classList.contains('text-expanded')) {
                    textContent.classList.remove('text-expanded');
                    toggleButton.textContent = '顯示更多';
                } else {
                    textContent.classList.add('text-expanded');
                    toggleButton.textContent = '顯示更少';
                }
            });

        });

        //返回上一頁
        function goBack() {
            window.history.back();
        };


        //載入所選課程頁面
        const searchCourse = async () => {
            let URL = 'https://localhost:7199/api/Course/' + classScheduleId;
            let response = await fetch(URL)
            let data = await response.json();
            console.log('data', data);

            let { class: _name, introduction, courseDate, gym, courseStartTime: t1, courseEndTime: t2, classPayment } = data[0]

            const title = document.getElementById('courseTitle')
            const p1 = document.getElementById('courseDescription')
            const date_span = document.getElementById('courseDate')
            const time_span = document.getElementById('courseTime')
            const place = document.getElementById('courseLocation')
            const price = document.getElementById('coursePrice')

            let dt = new Date(courseDate)
            let pay = classPayment
            let i = `${classPayment}`.length

            console.log('pay', pay)

            const year = dt.getFullYear();
            const month = dt.getMonth() + 1;
            const day = dt.getDate();

            if (i > 3) {
                pay = getnumber(pay)
            }

            title.textContent = _name
            p1.textContent = introduction
            date_span.textContent = `${year}/${month < 10 ? '0' + month : month}/${day < 10 ? '0' + day : day}` + todate(dt.getDay())
            time_span.textContent = '課程時間為 ' + t1.toString().substring(0, 5) + ' - ' + t2.toString().substring(0, 5)
            place.textContent = gym
            price.textContent = '$' + pay
        };
        searchCourse();

        //星期正規化
        function todate(d) {
            if (d === 1) {
                return '(一)'
            } else if (d === 2) {
                return '(二)'
            } else if (d === 3) {
                return '(三)'
            } else if (d === 4) {
                return '(四)'
            } else if (d === 5) {
                return '(五)'
            } else if (d === 6) {
                return '(六)'
            } else if (d === 0) {
                return '(日)'
            } else {
                return '沒這天啦!'
            }
        };

        //價格正規化
        function getnumber(txt) {
            var txt = `${txt}`
            let i = txt.length
            let j = parseInt('0')
            let num = ''
            let a = i % 3

            for (let k = 0; k < (i + a); k++) {
                if ((k - a) % 4 === 0) {
                    num += ','
                }
                else {
                    num += txt[j]
                    j++
                }
            }
            return num
        };

    </script>
}